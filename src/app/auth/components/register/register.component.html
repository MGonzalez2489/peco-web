<form [formGroup]="registerForm" (ngSubmit)="submit()" #formDirective="ngForm">
  <!-- Email -->
  <div class="mb-6">
    <p-floatlabel>
      <input
        pInputText
        formControlName="email"
        id="email"
        fluid="true"
        [ngClass]="{
          'ng-invalid':
            registerForm.controls['email'].invalid && formDirective.submitted,
          'ng-dirty':
            registerForm.controls['email'].invalid && formDirective.submitted,
        }"
      />
      <label for="email">Email</label>
    </p-floatlabel>
    @if (formDirective.submitted && registerForm.controls["email"].invalid) {
      <p-message severity="error" variant="simple" size="small"
        >Email requerido</p-message
      >
    }
  </div>
  <!-- Password -->
  <div class="my-6">
    <p-floatlabel>
      <p-password
        inputId="password"
        autocomplete="off"
        formControlName="password"
        fluid="true"
        feedback="false"
        [class.ng-dirty]="
          registerForm.controls['password'].invalid && formDirective.submitted
        "
      />
      <label for="password">Contraseña</label>
    </p-floatlabel>

    @if (formDirective.submitted && registerForm.controls["password"].invalid) {
      <p-message severity="error" variant="simple" size="small"
        >Password requerido</p-message
      >
    }
  </div>
  <!-- Confirm Password -->
  <div class="mb-6">
    <p-floatlabel>
      <input
        pInputText
        formControlName="confirmPassword"
        id="confPassword"
        fluid="true"
        type="password"
        autocomplete="off"
        [ngClass]="{
          'ng-invalid':
            registerForm.controls['email'].invalid && formDirective.submitted,
          'ng-dirty':
            registerForm.controls['email'].invalid && formDirective.submitted,
        }"
      />
      <label for="confPassword">Confirmar Contraseña</label>
    </p-floatlabel>
    @if (formDirective.submitted && registerForm.controls["email"].invalid) {
      <p-message severity="error" variant="simple" size="small"
        >Email requerido</p-message
      >
    }
  </div>

  <div class="my-6 min-h-12">
    <app-error-message />
  </div>

  <!-- Options -->
  <div class="mb-6 mt-10 flex flex-col items-stretch">
    <p-button
      label="Crear Cuenta"
      [loading]="isBusy$ | async"
      type="submit"
      [rounded]="true"
      fluid="true"
    />

    <div class="w-full flex justify-center mt-5">
      <p-button
        label="Ya tengo cuenta!"
        severity="info"
        [link]="true"
        [routerLink]="['/']"
      />
    </div>
  </div>
</form>
